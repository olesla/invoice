{{ define "title" }}
    {{ .PageTitle }}
{{ end }}


{{ define "crumbs" }}
    <a href="/customers">Kunder</a> / Opprett
{{ end }}

{{ define "body" }}
    <table>
        <tbody>
            <tr>
                <th>Navn</th>
                <td><input id="name" type="text" placeholder="Navn"></td>
            </tr>
            <tr>
                <th>Nummer</th>
                <td><input id="number" type="text" placeholder="Nummer"></td>
            </tr>
            <tr>
                <th>Adresse</th>
                <td><input id="address" type="text" placeholder="Adresse"></td>
            </tr>
            <tr>
                <th>Org</th>
                <td><input id="org" type="text" placeholder="Org"></td>
            </tr>
            <tr>
                <th>E-post</th>
                <td><input id="email" type="text" placeholder="E-post"></td>
            </tr>
            <tr>
                <th></th>
                <td><button id="save" class="btn">Lagre</button></td>
            </tr>
        </tbody>
    </table>

    <script defer>
        const saveButton = document.querySelector("#save")

        saveButton.addEventListener("click", async () => {
            const name = document.querySelector("#name").value
            const number = document.querySelector("#number").value
            const address = document.querySelector("#address").value
            const email = document.querySelector("#email").value
            const org = document.querySelector("#org").value
            const body = JSON.stringify({ name, number, address, email, org })

            const response = await fetch('/customers', { method: 'POST', body })
            if (response.status === 201) {
                location.replace("/customers")
            }
        })
    </script>
{{ end }}
